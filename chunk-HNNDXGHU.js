import{a as B,b as V,h as U}from"./chunk-IOUM5AVM.js";import{a as z}from"./chunk-QF4U42QP.js";import{$ as H,A as y,B as c,D as x,E as g,Ea as _,F as j,M as v,N as C,O as L,P as O,Q as D,R as l,S as a,T as n,U as m,W as d,X as E,Y as I,_ as s,aa as F,ea as w,g as k,k as u,p as M,q as h,ra as G,s as S,ua as N,va as A}from"./chunk-YPJVWY4P.js";var $=(()=>{let e=class e{constructor(i){this.http=i,this.projectList=new k({results:[],total:0,page:0})}getProjectListener(){return this.projectList.asObservable()}fetchProjects(i=0){return V?.static?this.http.get(`./assets/projects-${i}.json`).pipe(u(t=>(this.projectList.next(t),t))):this.http.get("./api/projects",{params:new N().set("page",i)}).pipe(u(t=>(this.projectList.next(t),t)))}createProject(i,t,o,p){return this.http.post("./api/projects",{title:i,description:t,thumbnail:o,url:p}).pipe(u(T=>{let f=this.projectList.value;f.results.unshift(T);let Q={results:f.results,total:f.total,page:f.page};return this.projectList.next(Q),T}))}updateProject(i,t){return this.http.put("./api/projects/"+i,{title:t.title,description:t.description})}deleteProject(i){return this.http.delete("./api/projects/"+i)}getProject(i){return this.http.get(`./api/projects/${i}`)}};e.\u0275fac=function(t){return new(t||e)(S(A))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var q=(()=>{let e=class e{constructor(){this.project={_id:"",title:"",category:"Other",thumbnail:"assets/thumbs/640x360.png",description:"",published:new Date,hidden:!1,link:""}}ngOnInit(){let i=this.project.category;i&&(this.project.category=i[0].toUpperCase()+i.slice(1))}getCategory(){switch(this.project.category.toLowerCase()){case"game":return"Game \u{1F3AE}";case"music":return"Music \u{1F3A7}";case"art":return"Art \u{1F3A8}";case"software":return"Software \u{1F4BB}";case"tool":return"Tool \u{1F6E0}\uFE0F";default:return"Other"}}getColor(){switch(this.project.category.toLowerCase()){case"game":return"#aaff71";case"music":return"#baf5ff";case"art":return"#ffbaba";case"software":return"#ffe8bc";case"tool":return"#ffffff";default:return"orange"}}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g({type:e,selectors:[["app-project-template"]],inputs:{project:"project"},standalone:!1,decls:8,vars:8,consts:[["target","_blank",1,"box",3,"href"],["id","title",1,"title","is-6"],[1,"image","is-16by9"],["id","corner"],[3,"src"]],template:function(t,o){t&1&&(a(0,"article")(1,"a",0)(2,"span",1),s(3),n(),a(4,"figure",2)(5,"span",3),s(6),n(),m(7,"img",4),n()()()),t&2&&(c(),l("href",w(o.project.link),y),c(2),H(o.project.title),c(2),I("background-color",o.getColor()),c(),F(" ",o.getCategory()," "),c(),l("src",w(o.project.thumbnail),y))},styles:["a.box[_ngcontent-%COMP%]{padding:.5rem .75rem .75rem}article[_ngcontent-%COMP%]{position:relative}a.box[_ngcontent-%COMP%]:hover, a.box[_ngcontent-%COMP%]:focus{box-shadow:0 .5em 1em -.125em #caecae1a,0 0 0 1px #b6ff79}#corner[_ngcontent-%COMP%]{display:block;position:absolute;color:#4a4a4a;z-index:1;text-align:center;bottom:0%;right:0%;padding:0rem .5rem;border-radius:6px}#title[_ngcontent-%COMP%]{color:#ffffffb5;padding:0rem;white-space:nowrap;overflow:hidden}"]});let r=e;return r})();function X(r,e){r&1&&(a(0,"div",0),s(1,"Loading, please wait!"),n())}function Y(r,e){if(r&1&&(a(0,"div",4),m(1,"app-project-template",5),n()),r&2){let b=e.$implicit;c(),l("project",b)}}function Z(r,e){if(r&1&&(a(0,"div",3),O(1,Y,2,1,"div",4,L),n()),r&2){let b=E();c(),D(b.projects)}}function ee(r,e){r&1&&(a(0,"div"),m(1,"app-not-found"),n())}var J=(()=>{let e=class e{constructor(i,t){this.projservice=i,this.toast=t,this.retrievedProjects={results:[],total:0,page:0},this.projects=[],this.success=!0,this.loading=!1,this.viewAsGrid=!0,this.itemsPerPage=10,this.next=!1,this.previous=!1}ngOnInit(){this.getProjects(),this.projectListener=this.projservice.getProjectListener().subscribe({next:i=>{this.retrievedProjects=i,this.projects=i.results}})}getProjects(i=0){this.projservice.fetchProjects(i).subscribe({next:t=>{this.next=t.total>this.itemsPerPage?i*this.itemsPerPage+t.results.length<t.total:!1,this.previous=i*this.itemsPerPage+t.results.length-this.itemsPerPage>0,document.documentElement.scrollTop=0},error:t=>{this.toast.pushNewToasty("Oops! - Looks like panda couldnt get any projects -- "+t.message,"is-light is-danger")}})}ngOnDestroy(){this.projectListener.unsubscribe()}sortByDate(i){i?this.projects=this.retrievedProjects.results.sort((t,o)=>new Date(o.published).getTime()-new Date(t.published).getTime()):this.retrievedProjects.results.sort((t,o)=>new Date(t.published).getTime()-new Date(o.published).getTime())}setViewAsGrid(i){this.viewAsGrid=i}};e.\u0275fac=function(t){return new(t||e)(x($),x(z))},e.\u0275cmp=g({type:e,selectors:[["app-projects-home"]],standalone:!1,decls:17,vars:3,consts:[[1,"box"],["id","filters",1,"box"],[3,"click"],[1,"grid","is-col-min-10"],[1,"cell"],[3,"project"]],template:function(t,o){t&1&&(v(0,X,2,0,"div",0),a(1,"div",1),s(2," View: ["),a(3,"a",2),d("click",function(){return o.setViewAsGrid(!0)}),s(4,"Grid"),n(),s(5,"] ["),a(6,"a",2),d("click",function(){return o.setViewAsGrid(!1)}),s(7,"List"),n(),s(8,"] - Sorting: ["),a(9,"a",2),d("click",function(){return o.sortByDate(!0)}),s(10,"Newer"),n(),s(11,"] ["),a(12,"a",2),d("click",function(){return o.sortByDate(!1)}),s(13,"Older"),n(),s(14,`]
`),n(),v(15,Z,3,0,"div",3),v(16,ee,2,0,"div")),t&2&&(C(o.loading?0:-1),c(15),C(o.projects.length>0?15:-1),c(),C(o.success?-1:16))},dependencies:[B,q],styles:["#filters[_ngcontent-%COMP%]{background-color:#00000056}"]});let r=e;return r})();var te=[{path:"",component:J}],K=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=j({type:e}),e.\u0275inj=h({imports:[_.forChild(te),_]});let r=e;return r})();var Ce=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=j({type:e}),e.\u0275inj=h({imports:[G,K,U]});let r=e;return r})();export{Ce as ProjectsModule};
